<div class="container">
  <div class="row">
    <div class="col-sm-24 col-md-24 col-lg-24 col-xl-24 col-xxl-24">
      <div class="pageHeader">
        <h1 class="">Bills</h1>
        <button
          type="button"
          class="btn btn-outline-primary"
          [routerLink]="['./add']"
        >
          Add Bill
        </button>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-24 col-md-24 col-lg-24 col-xl-24 col-xxl-24">
      <p-table [value]="bills.Data" [scrollable]="true">
        <ng-template pTemplate="header">
          <tr>
            <th>Index</th>
            <th>Menu Id</th>
            <th>Name</th>
            <th>Date</th>
            <th>Mobile</th>
            <th>Paid</th>
            <th>Create Date</th>
            <th>Action</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-product>
          <tr>
            <td>{{ product.id }}</td>
            <td>#{{ product.menuId }}</td>
            <td>{{ product.name }}</td>
            <td>
              {{ product.date | date : "dd MMM yyyy" }}
              <span *ngIf="product.time"> ({{ product.time }}) </span>
            </td>
            <td>
              {{ product.mobile }}
              <span *ngIf="product.mobile2">
                {{ product.mobile2 }}
              </span>
            </td>
            <td>
              <button
                type="button"
                class="btn btn-sm btn btn-success"
                [ngClass]="{ 'btn-danger': !product.isPaid }"
                (click)="paymentPaid(product)"
              >
                {{ product.isPaid ? "Paid" : "Not Paid" }}
              </button>
            </td>
            <td>
              {{ product.createdDate | date : "dd MMM yyyy" }}
            </td>
            <td>
              <p-menu
                #menu
                [popup]="true"
                [model]="actions"
                appendTo="body"
                [style]="{ 'white-space': 'nowrap', width: '10em' }"
              >
              </p-menu>
              <button
                type="button"
                class="btn btn-sm btn-outline-primary"
                (click)="selectedItem = product; menu.toggle($event)"
              >
                <i class="bi bi-three-dots-vertical"></i>
              </button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-24 col-md-24 col-lg-24 col-xl-24 col-xxl-24">
      <p-paginator
        (onPageChange)="onPageChange($event)"
        [first]="0"
        [rows]="filter.pageSize"
        [totalRecords]="bills.totalCount"
        [showFirstLastIcon]="false"
      >
      </p-paginator>
    </div>
  </div>
</div>

<div class="flex justify-content-center">
  <p-dialog
    header="Header"
    [(visible)]="showDeleteModal"
    [modal]="true"
    [style]="{ width: '25rem' }"
  >
    <ng-template pTemplate="header">
      <div class="inline-flex align-items-center justify-content-center gap-2">
        <span class="font-bold white-space-nowrap"> Delete Bill </span>
      </div>
    </ng-template>
    <p class="p-text-secondary">
      Are you sure, you want to Delete <b> {{ selectedItem.name }}'s </b> Bill
      ??
    </p>
    <ng-template pTemplate="footer">
      <button
        type="submit"
        class="btn btn-sm btn-outline-primary mr-2"
        (click)="onDeleteBill()"
      >
        Yes
      </button>
      <button
        type="button"
        class="btn btn-sm btn-outline-primary"
        (click)="showDeleteModal = false"
      >
        No
      </button>
    </ng-template>
  </p-dialog>
</div>
